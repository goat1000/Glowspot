/**
 * Copyright (C) 2011-2013 Graham Breach
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Lesser General Public License for more details.
 * 
 * You should have received a copy of the GNU Lesser General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
/**
 * Glowspot 1.1.1
 * For more information, please contact <graham@goat1000.com>
 */
(function(){var G,v,C,w={},E="",e,a="background",B=a+"-repeat",f=a+"-attachment",d=a+"-position",k=d+"-x",h=d+"-y",F=a+"-image",I=document,m=/\-([a-z])/g,j=[a+"-color",B,f,k,h,d,F],l=7,u={colour:"255,255,255",size:180,intensity:0.9},x=", ",t={};function q(L){var c=L.getBoundingClientRect(),O=I.documentElement,M=I.body,N=window,J=N.pageXOffset||O.scrollLeft,P=N.pageYOffset||O.scrollTop,K=O.clientLeft||M.clientLeft,i=O.clientTop||M.clientTop;return{x:c.left+J-K,y:c.top+P-i}}function z(c){return c[1].toUpperCase()}function g(c){return t[c]||(t[c]=c.replace(m,z))}function H(r,i){var c=I.defaultView;return(c&&c.getComputedStyle&&c.getComputedStyle(r,null).getPropertyValue(i))||(r.currentStyle&&r.currentStyle[g(i)])}function b(r,i,c){r.style[g(i)]=c}function o(r){var K=r[d],i=r[k],c=r[h],J=x,N,M,L,O=/\,\s*/;if(typeof i=="undefined"){return x+K}N=K.split(O);M=i.split(O);if(N.length>=M.length&&N[0].length>=M[0].length){J+=K}else{N=[];L=c.split(O);for(C=0;C<M.length;++C){N.push(M.shift()+" "+L.shift())}J+=(r[d]=N.join(x))}return J}function y(i,c){var r=G.getContext("2d"),J=r.createRadialGradient(v,v,0,v,v,v);J.addColorStop(0,"rgba("+i+x+c+")");J.addColorStop(1,"rgba("+i+",0)");r.fillStyle=J;r.fillRect(0,0,v*2,v*2);e="url("+G.toDataURL()+")"}function s(c,i){b(C,d,(c-v)+"px "+(i-v)+"px"+E)}function A(r,c,J,i){if(C){if(r.pageX){i=q(r.target),c=r.pageX-i.x,J=r.pageY-i.y}else{c=r.clientX,J=r.clientY}s(c,J)}}function n(J){var r=J.target,i=H(r,F),c;E="";if(i){for(c=0;c<l;++c){w[j[c]]=H(r,j[c])}E=o(w);b(r,B,"no-repeat, "+w[B]);b(r,F,e+x+i);b(r,f,"scroll, "+w[f])}C=r}function D(i){for(var c=0;c<l;++c){b(C,j[c],w[j[c]])}C=null}function p(M,L){var r,c=I.getElementById(M),J=c&&c.getElementsByTagName("a");G=I.createElement("canvas");if(!J||J.length<1||!G||!G.getContext){return}if(L){for(r in L){u[r]=L[r]}}v=u.size;G.width=G.height=v*2;y(u.colour,u.intensity);function K(O,i,N){O.addEventListener("mouse"+i,N,false)}for(r=0;r<J.length;++r){K(J[r],"move",A);K(J[r],"out",D);K(J[r],"over",n)}}window.glowspot=p}());
